# 카프카 파티셔너 (partitional)

Created: 2021년 7월 3일
Created by: Seha Jyang

## 카프카 파티셔너

![%E1%84%8F%E1%85%A1%E1%84%91%E1%85%B3%E1%84%8F%E1%85%A1%20%E1%84%91%E1%85%A1%E1%84%90%E1%85%B5%E1%84%89%E1%85%A7%E1%84%82%E1%85%A5%20(partitional)%203a31af30e6a34f4b94392910c70ac0b4/Untitled.png](%E1%84%8F%E1%85%A1%E1%84%91%E1%85%B3%E1%84%8F%E1%85%A1%20%E1%84%91%E1%85%A1%E1%84%90%E1%85%B5%E1%84%89%E1%85%A7%E1%84%82%E1%85%A5%20(partitional)%203a31af30e6a34f4b94392910c70ac0b4/Untitled.png)

프로듀서가 데이터 보내면 파티셔너를 통해 브로커로 전달한다.

파티셔너는 **토픽의 어떤 파티션에 넣을지 결정한다.**

- 레코드에 포함된 메세지 키 혹은 값에 따라 파티션 위치를 결정한다.

따로 설정하지 않으면 `Uniform Stickey Partitioner (default)` 로 설정된다.

### Uniform Stickey Partitioner

메세지 키 유무에 따라 다르게 동작한다.

- 메세지 키가 존재하는 경우
    - 파티셔너에 의해 hash값을 생성한다 ⇒ 이 hash 값으로 어느 파티션에 데이터가 들어갈지 결정된다.
    - 동일한 메세지 키 가진 레코드들이 동일 파티션에 들어가므로 데이터 순차 처리가 가능하다.
- 존재하지 않는 경우
    - RR로 파티션에 들어간다.
    - 프로듀서에서 배치로 모을 수 있는 레코드를 최대한 모아서 파티션으로 데이터를 RR 방식으로 보낸다.
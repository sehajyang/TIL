# 카프카 토픽, 파티션, 레코드

Created: 2021년 7월 3일
Created by: Seha Jyang

## 카프카 토픽

프로듀서가 발행한 데이터를 넣어두는 곳 

## 카프카 파티션

하나의 카프카 토픽은 여러개의 파티션을 가진다. 

- 어느 파티션에 보낼지 producer가 key 지정 가능
- 키가 `null`, 기본 파티션 사용 일 경우 `RR` 로 할당함
- 키가 있고, 기본 파티션 사용일 경우 키 hash로 특정 파티션에 할당함

카프카 파티션은 queue임

파티션 늘리는건 가능하지만 줄이는건 안됨

- 파티션 늘리면 컨슈머 갯수를 늘려서 데이터처리 분산 가능

## 카프카 레코드

파티션내엔 레코드가 있다.

컨슈머가 레코드를 가져가도 레코드 데이터가 삭제되진 않는다. 파티션엔 남아있다.

- 컨슈머 그룹이 다른 새 컨슈머가 가져갈 수 있다
    - `auto.offset.reset = earlist` 옵션
    - 이럴 경우 동일 데이터에 대해 두번 처리한다.
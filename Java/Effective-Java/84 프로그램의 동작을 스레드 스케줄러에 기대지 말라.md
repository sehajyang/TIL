# 84. 프로그램의 동작을 스레드 스케줄러에 기대지 말라

Created: 2021년 5월 28일
Created by: Seha Jyang

잘 작성된 프로그램이라면 스레드 스케줄러의 정책에 좌지우지 돼어선 안되며 **정확성이나 성능이 스레드 스레드 스케줄러에 따라 달라지는 프로그램이라면 다른 플랫폼에 이식하기 어렵다**

견고하고 이식성 좋은 프로그램을 만들려면 가능산 스레드의 평균적인 수를 프로세서 수보다 지나치게 많아지지 않도록 해야하며 그런 실행 가능한 스레드 수를 적게 유지하는 방법은 각 스레드가 작업을 완료한 후엔 다음 테스크가 생길 때 까지 대기하도록 하는 것 이다. **스레드는 당장 처리해야 할 작업이 없다면 실행돼서는 안 된다**

스레드 풀 사이즈를 적절하게 설정하고 작업을 짧게 유지하되 너무 짧으면 안된다.

**특정 스레드가 다른 스레드와 비교해 간신히 돌아가는 프로그램을 보더라도 `Thread.yield` 를 써서 문제를 고쳐보려는 유혹을 떨쳐내자. 이식성을 잃게 된다. 게다가 `Thread.yield` 는 테스트할 수단도 없다.**

스레드 우선순위를 조작하는것도 이식성이 떨어지게되니 하지 않는게 좋다.

## 정리

프로그램의 동작을 스레드 스케줄러에 기대지 말아야한다. 견고성과 이식성을 모두 해치는 행위며 Thread.yield와 스레드 우선순위에 의존해서도 안된다. 스레드 우선순위는 이미 잘 동작하는 프로그램의 서비스 품질을 높이기 위해 드물게 쓰일순 있지만 간신히 동작하는 프로그램을 '고치는 용도'론 사용해선 안된다.
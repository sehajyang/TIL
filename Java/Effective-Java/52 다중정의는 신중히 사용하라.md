# 52. 다중정의는 신중히 사용하라

Created: 2021년 5월 19일
Created by: Seha Jyang

overrloading 된 메서드는 **어느 메서드를 호출할지가 컴파일타임에 정해진다**

**overriding 한 메서드는 동적으로 선택되고, overrloading 한 메서드는 정적으로 선택된다**

overriding 한 메서드는 항상 가장 하위에서 정의한 메서드가 실행된다.

**다중정의가 혼동을 일으키는 상황은 피하자. 안전하고 보수적으로 가려면 파라미터 수가 같은 다중정의는 만들지 말자, varargs를 사용하는 메서드라면 다중정의를 아예 하지 말아야한다. 차라리 다중정의 하는 대신 메서드 이름을 다르게 지어주는게 낫다.**

다중정의된 메서드 들이 함수형 인터페이스를 인수로 받을 때, 서로 다른 함수형 인터페이스라도 인스 위치가 같으면 혼란이 생긴다. 따라서 **메서드를 다중정의할 때, 서로 다른 함수형 인터페이스라도 같은 위치의 인수로 받아서는 안된다.**

대부분 어떤 다중 정의 메서드가 선택될지 구분하기 어려워할 것이다. 이미 만들어진 클래스가 끼어들면 특히 더 그렇다. 예를들어 String은 자바 4부터 `contentEquals(StringBuffer)` 메서드를 가지고 있었다. 근데 자바5부터 StringBuffer, StringBuilder, String, CharBuffer등의 입을 위한 공통 인터페이스로 CharSequence 가 등장했고 String도 CharSequence를 받은 ContentEquals가 다중정의됐다. 

자바 라이브러리는 다중 정의를 신중히 사용하는데에 실패한 클래스도 몇 개 있다. String의 ValueOf(char[])과 valueOf(Object)는 같은 객체를 건네더라도 전혀 다른 일을 수행한다.

## 정리

일반적으로 파라미터 수가 같을 때는 다중정의를 피하는게 좋다. 상황에 따라 생성자라면 이 조언을 따르기가 불가능 할 수 있는데 그럴땐 헷갈릴만한 팔미터는 형변환해서 정확한 다중정의 메서드가 선택되도록 해야한다. 이것이 불가능하면, 예를들어 기존 클래슬르 수정해 새로운 인터페이스를 구현해야 할 때는 같은 객체를 입력받는 다중 정의 메서드들이 모두 동일하게 동작하도록 만들어야 한다. 그렇지 못하면 프로그래머는 다중정의된 메서드나 생성자를 효과적으로 사용하지 못할것이고 의도대로 동작하지 않는 이유를 이해하지도못할 것이다.
# 06. 메세지와 인터페이스

Created: 2021년 2월 26일
Created by: Seha Jyang

- 애플리케이션은 클래스로 구성되지만 메세지를 통해 정의된다(metz12)

## 클라이언트-서버 모델

- 협력은 어떤 객체가 다른 객체에게 무언가 요청할 때 시작된다.

### 메세지와 메세지 전송

- 메세지
    - 객체들이 협력하기 위해 사용할 수 있는 의사소통 수단
    - 오퍼레이션 네임과 argument 로 구성됨
- 오퍼레이션
    - 객체가 다른 객체에게 제공하는 추상적 서비스
- 시그니처
    - 오퍼레이션 혹은 메서드의 이름과 파라미터 목록을 합쳐 시그니처 라고 부른다.
    - 오퍼레이션은 실행 코드 없이 시그니처만을 정의한 것이다.
    - 메서드는 이 시그니처에 구현을 더한 것이다.

## 인터페이스와 설계 품질

- 좋은 인터페이스는 **최소한의 인터페이스와 추상적인 인터페이스** 이다.
    - 꼭 필요한 오퍼레이션만 인터페이스에 포함하며, 어떻게 수행하는지가 아니라 무엇을 하는지를 표현한다.
- 퍼블릭 인터페이스의 품질에 영향을 미치는 원칙
    - 디미터 법칙
    - 묻지말고 시켜라
    - 의도를 드러내는 인터페이스
    - 명령-쿼리 분리

### 디미터 법칙

- 객체의 내부 구조에 강하게 결합되지 않도록 협력 경로를 제한하라
- 객체들의 협력 경로를 제한하면 결합도를 낮출 수 있다.
- 오직 인접한 이웃하고만 말하라
    - 오직 하나의 `.` 만 사용하라
    - 그러나, **객체의 내부 구조가 외부로 노출되지 않았다면 디미터 원칙을 위반한게 아니다.**
- 아래 조건을 만족하는 인스턴스에만 메세지를 전송하도록 해야한다.
    - this 객체
    - 메서드의 파라미터
    - this 속성
    - this 속성인 컬렉션의 요소
    - 메서드 내에서 생성된 로컬 객체

### 묻지말고 시켜라

- 내부의 상태를 묻는 오퍼레이션을 인터페이스에 포함시키고 있다면 고민해봐야 한다.
    - 내부의 상태를 이용해 결정을 내리는 로직이 객체 외부에 존재한다면, 해당객체가 책임져야 하는 행동이 외부로 누수된 것이다.
- 상태를 묻는 오퍼레이션을 행동을 요청하는 오퍼레이션으로 대체해야 한다.

### 의도를 드러내는 인터페이스

- 메서드 네이밍을 할때 메서드가 작업을 어떻게 수행하는지 작성하는건 좋지 않다.
    - 메서드의 이름은 내부의 구현 방법을 드러내면 안된다.
    - 구현이 변경되면 메서드의 이름이 변경되어야하기 때문에 좋지 않다.
- 메서드의 이름은 **무엇**을 하는지를 드러내야 한다.
- 첫번째와 매우 다른 두번째 구현을 생각하고 동일한 이름을 붙인다고 생각하면서 지을것

## 주의해야 할 점

- 모든 상황에서 맹목적으로 위임 메서드를 추가하면 **같은 퍼블릭 인터페이스 안에** **어울리지 않는 오퍼레이션들이 공존하게 된다.**
    - 결과적으로 상관없는 책임들을 한꺼번에 떠안게 된다 → 응집도가 낮아진다.

## 명령-쿼리 분리 원칙

- 명령과 쿼리를 분리하기 위해서는 다음의 두 규칙을 지켜야한다.
    - 객체의 상태를 변경하는 명령은 리턴값을 가질 수 없음
    - 객체의 정보를 반환하는 쿼리는 상태를 변경할 수 없음
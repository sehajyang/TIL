# 04. 설계 품질과 트레이드오프

Created: 2021년 2월 24일
Created by: Seha Jyang

## 응집도와 결합도

### 응집도

- 모듈에 포함된 내부 요소들이 연관돼 있는 정도
- 객체 또는 클래스에 얼마나 관련 높은 책임을 할당했는지 나타냄

### 결합도

- 의존성의 정도
- 다른 모듈에 대해 얼마나 많은 지식을 갖고있는지를 나타내는 척도
- 결합도는 객체 또는 클래스가 협력에 필요한 적절한 수준의 관계만을 유지하고 있는지 나타냄
- 인터페이스에 의존하도록 코드를 작성해야 낮은 결합도를 얻을 수 있다.
    - 인터페이스에 대해 프로그래밍하라(GoF94)

### 좋은 설계란?

- 오늘의 기능을 수행하면서 내일의 변경을 수용할 수 있는 설계
- 결론적으로, 응집도와 결합도는 변경과 관련되어있다.
    - 설계를 변경하기 쉽다.
- 변경의 관점에서
    - 응집도란, 변경이 발생할 때 모듈 내부에서 발생하는 변경의 정도
    - 결합도란 한 모듈이 변경되기 위해서 다른 모듈의 변경을 요구하는 정도
- 캡슐화를 지키면
    - 모듈 안의 응집도는 높아지고 결합도는 낮아진다.
- 데이터중심이 아닌, 책임 중심의 설계를 해야한다.
    - 데이터 중심은 캡슐화를 위반하기 쉽다.

### 캡슐화 위반

- 설계할때 협력에 관해 고민하지 않으면 캡슐화를 위반하는 과도한 접근자와 수정자를 가지게된다.
    - 최대한 많은 접근자 메서드를 추가하게 되는 것이기 때문
- 추측에 의한 설계 전략(design by guessing strategy)
    - 접근저와 수정자에 과도하게 의존하는 설계 방식(엘런 홀럽)

### 높은 결합도

- 객체 내부의 구현이 객체의 인터페이스에 드러난다는 것은 클라이언트가 구현에 강하게 결합된다는 것을 의미한다.

### 낮은 응집도

- 응집도는 변경과 관련이 있다.
    - 클래스는 단 한가지의 변경 이유만 가져야 한다.
    - 변경을 수용하기 위해 하나 이상의 클래스를 수정해야하는건 응집도가 낮은 것이다.
- 어떤 코드를 수정한 후에 아무런 상관도 없던 코드에 문제가 발생하는 것은 모듈의 응집도가 낮을 때 발생하는 증상이다.
- 하나의 요구사항을  반영하기 위해 동시에 여러 모듈을 수정해야한다.
    - 응집도가 낮을 경우 다른 모듈에 위치해야 할 책임의 일부가 엉뚱한 곳에 위치하게 되기 때문이다.

### 캡슐화를 지켜라

- 객체는 자신이 어떤 데이터를 갖고있는지를 내부에 캡슐화하고 외부에 공개해선 안된다.
- 객체는 스스로의 상태를 책임져야 하며 외부에서는 인터페이스에 정의된 메서드를 통해서만 상태에 접근할 수 있어야한다.

### 자신의 데이터를 책임지는 객체

- 객체는 **객체 스스로 자신의 상태를 처리할 수 있어야** 하기 때문에 상태와 행동을 객체로 묶는다.
- 객체를 설계할 땐 다음과 같은 질문이 필요하다
    - 이 객체가 어떤 데이터를 포함해야 하는가
    - 이 객체가 데이터에 대해 수행해야 하는 오퍼레이션은 무엇인가
    - 이 객체가 내부적으로 바뀌었을때 외부에선 어떤 영향을 받게되는가?